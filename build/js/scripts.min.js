app.controller("ActorCtrl",["$scope","$routeParams","Restangular","$location",function(a,b,c,d){function e(a){for(var b=0,c=j.length;b<c;b++)j[b].id=a.pop()}function f(){for(var a=[],b=0;b<k;++b)a[b]=b;return g(a)}function g(a){var b,c,d=a.length;if(d)for(;--d;)c=Math.floor(Math.random()*(d+1)),b=a[c],a[c]=a[d],a[d]=b;return a}c.setBaseUrl("https://api.themoviedb.org/3/person");var h={api_key:"1fd95566952c08b6ecf132ae47c16a33"},i=c.all(b.actorId);i.customGET("",h).then(function(b){a.actor=b,a.mainImage="http://image.tmdb.org/t/p/w500"+b.profile_path,i=c.all(b.id).all("images"),i.customGET("",h).then(function(b){a.actor.images=b.profiles}),i=c.all(b.id).all("movie_credits"),i.customGET("",h).then(function(b){a.movieCredits=b.cast,a.mySlides=[];for(index in a.movieCredits){var c={id:a.movieCredits[index].id,image:"http://image.tmdb.org/t/p/w500"+a.movieCredits[index].poster_path};a.mySlides.push(c.image)}})}),a.changePicture=function(b){var c="http://image.tmdb.org/t/p/w500"+b;a.mainImage=c},a.myInterval=2e3,a.noWrapSlides=!1,a.active=0;var j=a.slides=[],k=0;a.addSlide=function(a){a&&j.push({image:a.image,text:["Nice image","Awesome photograph","That is so cool","I love that"][j.length%4],id:k++,movieId:a.id})},a.randomize=function(){var a=f();e(a)};for(var l=0;l<4;l++)a.addSlide()}]),app.controller("GenreCtrl",["$scope","$rootScope","$routeParams","Restangular",function(a,b,c,d){b.searchPhrase="",d.setBaseUrl("https://api.themoviedb.org/3/genre/");var e={api_key:"1fd95566952c08b6ecf132ae47c16a33"},f=d.all(c.genreId+"/movies");f.customGET("",e).then(function(b){a.popularMovies=b.results}),b.selectedId=c.genreId}]),app.controller("GenresCtrl",["$scope","Restangular","$location",function(a,b,c){a.hamMenuOpened=!1,b.setBaseUrl("https://api.themoviedb.org/3/genre/movie");var d={api_key:"1fd95566952c08b6ecf132ae47c16a33"},e=b.all("list");e.customGET("",d).then(function(b){a.genres=b.genres}),a.genre="Select",a.changeGenre=function(){console.log("Genre change"),c.path("/genre/"+a.genre)},a.openHamMenu=function(){a.hamMenuOpened=!a.hamMenuOpened}}]),app.controller("MovieCtrl",["$scope","$routeParams","Restangular","$location",function(a,b,c,d){a.showCommentForm=!1,c.setBaseUrl("https://api.themoviedb.org/3/movie");var e={api_key:"1fd95566952c08b6ecf132ae47c16a33"},f=c.all(b.movieId);f.customGET("",e).then(function(b){a.movie=b,a.movieFBFilter=a.movie.id,a.mainImage="http://image.tmdb.org/t/p/w500"+a.movie.poster_path,c.setBaseUrl("https://api.themoviedb.org/3/movie"),f=c.all(b.id).all("videos"),f.customGET("",e).then(function(b){a.videoId=b.results[0]?b.results[0].key:{}}),c.setBaseUrl("https://api.themoviedb.org/3/movie"),f=c.all(b.id).all("images"),f.customGET("",e).then(function(b){a.movie.images=b.posters}),c.setBaseUrl("https://api.themoviedb.org/3/movie"),f=c.all(b.id).all("credits"),f.customGET("",e).then(function(b){a.movie.actors=b.cast}),c.setBaseUrl("https://api.themoviedb.org/3/movie"),f=c.all(b.id).all("similar"),f.customGET("",e).then(function(b){a.similar=b.results,a.docs=[];for(index in a.similar){var c={id:a.similar[index].id,doc:"http://image.tmdb.org/t/p/w500"+a.similar[index].poster_path};a.docs.push(c)}})}),a.changePicture=function(b){var c="http://image.tmdb.org/t/p/w500"+b;a.mainImage=c},a.toggleCommentsForm=function(){a.showCommentForm=!a.showCommentForm},a.postComment=function(b,c,d){var e={nick:b,text:c,timestamp:(new Date).getTime(),movieId:d};a.comments.$add(e),a.commentNick="",a.commentText="",a.showCommentForm=!1}}]),app.controller("NowPlayingCtrl",["$scope","$rootScope","Restangular",function(a,b,c){b.searchPhrase="",c.setBaseUrl("https://api.themoviedb.org/3/movie");var d={api_key:"1fd95566952c08b6ecf132ae47c16a33"},e=c.all("now_playing");e.customGET("",d).then(function(b){a.popularMovies=b.results}),b.selectedId="Now Playing"}]),app.controller("PopularCtrl",["$scope","$rootScope","Restangular",function(a,b,c){b.searchPhrase="",c.setBaseUrl("https://api.themoviedb.org/3/movie");var d={api_key:"1fd95566952c08b6ecf132ae47c16a33"},e=c.all("popular");e.customGET("",d).then(function(b){a.popularMovies=b.results}),b.selectedId="Popular"}]),app.controller("TopRatedCtrl",["$scope","$rootScope","Restangular",function(a,b,c){b.searchPhrase="",c.setBaseUrl("https://api.themoviedb.org/3/movie");var d={api_key:"1fd95566952c08b6ecf132ae47c16a33"},e=c.all("top_rated");e.customGET("",d).then(function(b){a.popularMovies=b.results}),b.selectedId="Top rated"}]),app.controller("UpcomingCtrl",["$scope","$rootScope","Restangular",function(a,b,c){b.searchPhrase="",c.setBaseUrl("https://api.themoviedb.org/3/movie");var d={api_key:"1fd95566952c08b6ecf132ae47c16a33"},e=c.all("upcoming");e.customGET("",d).then(function(b){a.popularMovies=b.results}),b.selectedId="Upcoming"}]);